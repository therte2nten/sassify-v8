@use '../../../config' as config;
@use '../../../devpack/invalid-value-message' as *;
@use '../../../devpack/illogical-usage-message' as *;
@use '../../utility/validator/is-number' as *;
@use '../../utility/validator/is-list-contains' as *;
@use '../../prefixer' as *;

/// > –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–Ω—ã–º —á–∏—Å–ª–æ–º —Å—Ç—Ä–æ–∫. –ï—Å–ª–∏
/// > —Ç–µ–∫—Å—Ç –ø—Ä–µ–≤—ã—à–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫, —Ç–æ —Ç–µ–∫—Å—Ç
/// > –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –∏ –≤ –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ.
/// >
/// > [WebReference](https://webref.ru/css/line-clamp)
///
/// –ú–∏–∫—Å–∏–Ω `text-shorten` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏
/// –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–ª–æ–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç—Ä–æ–∫.
/// ---
/// @name text-shorten
/// @group CSSet
/// @since 7.0.0
/// @access public
/// @author Haba Kudzaev (therteenten)
/// @link https://github.com/therteenten/sassify/blob/develop/core/csset/text-shorten/_index.scss –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –º–∏–∫—Å–∏–Ω–∞
/// @example scss –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Sass (SCSS)
/// 	.text-shorten {
/// 		@include text-shorten(4);
/// 	}
///
/// 	.text-shorten-illogical {
/// 		@include text-shorten();
/// 	}
/// @example css –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –º–∏–∫—Å–∏–Ω–∞ –≤ CSS
/// 	.text-shorten {
/// 		white-space: nowrap;
/// 		text-overflow: ellipsis;
/// 		overflow: hidden;
/// 	}
/// 	@supports (-webkit-line-clamp: 4) {
/// 		.text-shorten {
/// 			overflow: hidden;
/// 			text-overflow: ellipsis;
/// 			white-space: initial;
/// 			-webkit-line-clamp: 4;
/// 			-webkit-box-orient: vertical;
/// 			display: -webkit-box;
/// 			display: -moz-box;
/// 		}
/// 	}
///
/// 	.text-shorten-illogical {
/// 		/* ? (sassify) üü¶ –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞! */
/// 		/* ? (sassify) –í—ã —É–∫–∞–∑–∞–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –º–∏–∫—Å–∏–Ω–∞ ¬´text-shorten¬ª –∑–Ω–∞—á–µ–Ω–∏–µ ¬´none¬ª. –ú–∏–∫—Å–∏–Ω –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –Ω–∏–∫–∞–∫–∏—Ö —Å—Ç–∏–ª–µ–π, —Ç.–∫. –ø—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ ¬´none¬ª —Å–º—ã—Å–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–∫—Å–∏–Ω –Ω–µ—Ç. */
/// 	}
/// @param {string | number} $line-clamp [config.$dvalues--text-shorten] - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ —Ç–µ–∫—Å—Ç–∞
@mixin text-shorten($line-clamp: config.$dvalues--text-shorten) {

	// –ï—Å–ª–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `$line-clamp` –ø–µ—Ä–µ–¥–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ `null`,
	// —Ç–æ –æ—Ç–æ–±—Ä–∞–∑–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ–ª–æ–≥–∏—á–Ω–æ:
	@if $line-clamp == none {
		@include illogical-usage-message(config.$string--debug__text-shorten-none)
	}

	// –ù–æ –µ—Å–ª–∏ –≤ –º–∏–∫—Å–∏–Ω –ø–µ—Ä–µ–¥–∞–Ω–æ —á–∏—Å–ª–æ (`Number`),
	// —Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω—É–∂–Ω—ã–µ —Å—Ç–∏–ª–∏:
	@else if is-number($line-clamp)== true {

		white-space  : nowrap;
		text-overflow: ellipsis;
		overflow     : hidden;

		@supports (-webkit-line-clamp: $line-clamp) {

			overflow          : hidden;
			text-overflow     : ellipsis;
			white-space       : initial;

			-webkit-line-clamp: $line-clamp;
			-webkit-box-orient: vertical;

			@include prefixer(
				display,
				box,
				webkit moz,
				false,
				true
			);

		}

	}

	// –ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `$line-clamp`
	// –ø–µ—Ä–µ–¥–∞–Ω–æ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–æ –æ—Ç–æ–±—Ä–∞–∑–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ
	// –æ–± —ç—Ç–æ–º:
	@else {
		@include invalid-value-message(
			'text-shorten',
			$line-clamp,
			'Number'
		);
	}

}
